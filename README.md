# EquipGroup Project

Этот проект представляет собой Laravel-приложение, которое можно запустить с использованием Docker Compose.

## Содержание

- [Требования](#требования)
- [Запуск проекта](#запуск-проекта)
  - [1. Клонирование репозитория](#1-клонирование-репозитория)
  - [2. Настройка файла .env](#2-настройка-файла-env)
  - [3. Запуск Docker-контейнеров](#3-запуск-docker-контейнеров)
  - [4. Установка зависимостей Composer](#4-установка-зависимостей-composer)
  - [5. Генерация ключа приложения Laravel](#5-генерация-ключа-приложения-laravel)
  - [6. Выполнение миграций базы данных и заполнение данными](#6-выполнение-миграций-базы-данных-и-заполнение-данными)
- [Доступ к приложению](#доступ-к-приложению)
- [Остановка проекта](#остановка-проекта)
- [Устранение неполадок](#устранение-неполадок)

## Требования

Для запуска проекта вам потребуется установленный [Docker](https://www.docker.com/get-started/) и [Docker Compose](https://docs.docker.com/compose/install/).

## Запуск проекта

Следуйте этим шагам для запуска проекта с использованием Docker Compose:

### 1. Клонирование репозитория

Если вы еще не клонировали репозиторий, сделайте это:

```bash
git clone <URL_вашего_репозитория>
cd EquipGroup
```

### 2. Настройка файла .env

Создайте файл `.env` в корневой директории проекта, скопировав `.env.example`:

```bash
cp .env.example .env
```

Отредактируйте файл `.env`, чтобы он содержал следующие настройки для подключения к базе данных MySQL, работающей в Docker-контейнерах:

```dotenv
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=laravel
DB_USERNAME=laravel_user
DB_PASSWORD=laravel_password
```

### 3. Запуск Docker-контейнеров

Выполните следующую команду в корневой директории проекта, чтобы запустить все сервисы (Nginx, PHP-FPM, MySQL):

```bash
docker compose up -d
```
Эта команда создаст и запустит контейнеры в фоновом режиме. MySQL-контейнер может потребовать некоторое время для полной инициализации при первом запуске.

### 4. Установка зависимостей Composer

После запуска контейнеров установите зависимости Laravel внутри PHP-контейнера:

```bash
docker compose exec php composer install
```

### 5. Генерация ключа приложения Laravel

Сгенерируйте ключ приложения Laravel. Это необходимо для корректной работы приложения:

```bash
docker compose exec php php artisan key:generate
```

### 6. Выполнение миграций базы данных и заполнение данными

Выполните миграции, чтобы создать все необходимые таблицы в базе данных, и затем заполните их тестовыми данными с помощью сидов (Faker):

```bash
docker compose exec php php artisan migrate:fresh --seed
```
Команда `migrate:fresh` удалит все существующие таблицы и создаст их заново, а `--seed` запустит сиды для заполнения их данными.

## Доступ к приложению

После выполнения всех шагов, ваше приложение должно быть доступно по адресу:

[http://localhost](http://localhost)

## Остановка проекта

Чтобы остановить все запущенные сервисы Docker Compose:

```bash
docker compose down
```

Если вы хотите остановить сервисы и удалить все связанные тома (что приведет к потере всех данных в базе данных), используйте:

```bash
docker compose down -v
```
Это полезно, если вы хотите начать с чистого листа.

## Устранение неполадок

*   **`Connection refused`**: Если вы получили эту ошибку при выполнении команд `php artisan`, это означает, что PHP-контейнер не смог подключиться к MySQL. Убедитесь, что все контейнеры запущены (`docker compose ps`) и дайте MySQL достаточно времени для инициализации. Повторите команду `docker compose exec php ...` через несколько секунд.
*   **`Table 'xxx' already exists`**: Если вы видите эту ошибку при миграциях, это означает, что таблицы уже существуют. Используйте `docker compose down -v` для полного сброса базы данных перед повторным запуском миграций.
*   **`Unknown column 'xyz'`**: Эта ошибка означает, что в базе данных отсутствует ожидаемая колонка. Убедитесь, что ваши файлы миграций (`database/migrations/...`) точно соответствуют требуемой структуре таблиц и что вы успешно выполнили `php artisan migrate:fresh --seed`.
